<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xzyo Store - Joki Blox Fruit</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #0072ff; --dark-bg: #0b1220; --card-bg: #111a33; --text-white: #ffffff;
        }
        * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--dark-bg); color: var(--text-white); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .wrapper { max-width: 1000px; width: 100%; }
        h2 { text-align: center; letter-spacing: 2px; }
        .btn { width: 100%; padding: 15px; border-radius: 12px; border: none; margin-top: 15px; background: linear-gradient(90deg, #020617, #0b3c8a, #020617); color: white; font-weight: bold; cursor: pointer; transition: 0.3s; text-align: center; text-decoration: none; display: block; }
        .container { display: flex; gap: 20px; align-items: flex-start; margin-top: 20px; flex-wrap: wrap; }
        .left-side, .right-side { flex: 1; min-width: 320px; }
        .card { background: var(--card-bg); border: 1px solid rgba(255,255,255,0.1); border-radius: 15px; padding: 25px; margin-bottom: 20px; }
        input, textarea, select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #1e293b; margin-top: 10px; background: #0b1220; color: white; }
        .section-title { margin-top: 20px; font-weight: bold; color: var(--primary-blue); border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }
        .price-list { list-style: none; padding: 0; }
        .price-list li { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 14px; }
        .new-p { color: #00c6ff; font-weight: bold; }
        .lb-item { display: flex; justify-content: space-between; padding: 10px; background: rgba(255,255,255,0.03); margin-bottom: 5px; border-radius: 8px; border-left: 3px solid var(--primary-blue); }
    </style>
</head>
<body>

<div class="wrapper">
    <h2>JOKI BF XZYO STORE</h2>
    <p style="text-align:center; color:#7cc7ff;">Leaderboard & Order Form</p>

    <div class="container">
        <div class="left-side">
            <div class="card">
                <form id="orderForm">
                    <input type="text" id="namaPanggil" placeholder="Nama Panggilan Anda" required>
                    <input type="text" id="userRoblox" placeholder="Username Roblox" required>
                    <input type="password" id="pw" placeholder="Password Roblox" required>
                    <input type="text" id="noWa" placeholder="Nomor WhatsApp" required>
                    
                    <select id="hargaJoki" required>
                        <option value="">-- Pilih Harga Joki --</option>
                        <option value="4200">Rp 4.200</option>
                        <option value="6800">Rp 6.800</option>
                        <option value="12700">Rp 12.700</option>
                        <option value="17000">Rp 17.000</option>
                        <option value="25500">Rp 25.500</option>
                    </select>

                    <textarea id="ket" placeholder="Jenis Joki..." required></textarea>
                    <button type="submit" class="btn">ORDER & UPDATE DATA</button>
                </form>
            </div>

            <div class="card">
                <h3 style="text-align:center;"><i class="fa-solid fa-crown" style="color:gold"></i> TOP SULTAN XZYO</h3>
                <div id="leaderboardList">Memuat list...</div>
            </div>
        </div>

        <div class="right-side">
            <div class="card">
                <h3 style="text-align:center;">LIST HARGA</h3>
                <div class="section-title">Leveling & Sea</div>
                <ul class="price-list">
                    <li>1 â€“ 700 (Sea 1) <span class="new-p">12.7k</span></li>
                    <li>700 â€“ 1500 (Sea 2) <span class="new-p">12.7k</span></li>
                    <li>1500 â€“ MAX <span class="new-p">17k</span></li>
                </ul>
                <p style="font-size:11px; color:#aaa; margin-top:10px;">Data joki Anda tersimpan di browser ini secara lokal.</p>
            </div>
        </div>
    </div>
</div>

<script src="data.js"></script>
<script>
    const listDiv = document.getElementById('leaderboardList');

    // Tampilkan Data Global dari data.js
    function loadGlobal() {
        if (typeof dataSultan !== 'undefined') {
            listDiv.innerHTML = "";
            dataSultan.sort((a, b) => b.total - a.total);
            dataSultan.forEach((u, i) => {
                let mahkota = u.kali >= 5 ? ' ðŸ‘‘' : '';
                listDiv.innerHTML += `
                    <div class="lb-item">
                        <span>${i+1}. <b>${u.nama}</b>${mahkota}</span>
                        <span>Rp ${u.total.toLocaleString()} (${u.kali}x)</span>
                    </div>`;
            });
        }
    }

    document.getElementById('orderForm').onsubmit = function(e) {
        e.preventDefault();
        const nama = document.getElementById('namaPanggil').value;
        const harga = parseInt(document.getElementById('hargaJoki').value);
        
        // --- LOGIKA LOCAL STORAGE (Simpan di HP User) ---
        let localData = JSON.parse(localStorage.getItem('myJoki')) || { total: 0, kali: 0 };
        localData.total += harga;
        localData.kali += 1;
        localStorage.setItem('myJoki', JSON.stringify(localData));

        // --- KIRIM WA KE ADMIN ---
        const pesan = `Halo Admin Xzyo!%0A` +
                      `Saya mau order joki.%0A%0A` +
                      `Nama: ${nama}%0A` +
                      `Total Belanja: Rp ${localData.total}%0A` +
                      `Joki Ke: ${localData.kali}%0A%0A` +
                      `*KODE UPDATE ADMIN:*%0A` +
                      `{ nama: "${nama}", total: ${localData.total}, kali: ${localData.kali} },`;
        
        window.open(`https://wa.me/6289692310378?text=${pesan}`, '_blank');
        alert("Data tersimpan secara lokal! Silakan kirim pesan WA yang terbuka untuk update Leaderboard Global.");
    };

    loadGlobal();
</script>
</body>
</html>
